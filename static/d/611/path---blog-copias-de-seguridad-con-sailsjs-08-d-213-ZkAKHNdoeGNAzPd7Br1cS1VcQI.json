{"data":{"markdownRemark":{"html":"<p>Últimamente estoy haciendo varias apps usando <strong><a href=\"https://facebook.github.io/react/\">ReactJS</a></strong> con el framework <strong><a href=\"http://sailsjs.org/\">SailsJS</a></strong>. <strong>SailsJS</strong> </p>\n<p>ofrece una api desde el minuto 1 donde se pueden hacer altas, bajas, modificaciones y búsquedas. Además tiene distintos adaptadores para conectar con distintas bases de datos. </p>\n<p>El problema que tenía es que quería guardar mis datos, por si en el futuro hubiese algún problema. Buscando en google, descubrí que se puede añadir funcionalidad en el archivo config/bootstrap.js antes de que se inicie el servidor con <strong>sails lift</strong>. </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  module<span class=\"token punctuation\">.</span>exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">bootstrap</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>cb<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> sys <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span>‘sys’<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> exec <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span>‘child_process’<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>exec<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> child<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> date <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> fecha <span class=\"token operator\">=</span> date<span class=\"token punctuation\">.</span><span class=\"token function\">getFullYear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> “<span class=\"token operator\">-</span>” <span class=\"token operator\">+</span> date<span class=\"token punctuation\">.</span><span class=\"token function\">getMonth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token operator\">+</span> “<span class=\"token operator\">-</span>” <span class=\"token operator\">+</span> date<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> file <span class=\"token operator\">=</span> “<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>sql<span class=\"token operator\">-</span>backup<span class=\"token operator\">/</span>learnseries”<span class=\"token operator\">+</span> fecha <span class=\"token operator\">+</span> “<span class=\"token punctuation\">.</span>sql”<span class=\"token punctuation\">;</span>\n    child <span class=\"token operator\">=</span> <span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>“mysqldump <span class=\"token operator\">-</span>u root <span class=\"token operator\">-</span>p learnseries <span class=\"token operator\">></span> ” <span class=\"token operator\">+</span> file<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">,</span> stdout<span class=\"token punctuation\">,</span> stderr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>‘exec error<span class=\"token punctuation\">:</span> ‘ <span class=\"token operator\">+</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token function\">cb</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>Se ejecuta el comando mysqldump con permisos de administrador y se guarda un fichero mysql con la fecha en la que se ejecuta. </p>\n<p>Documentación: <a href=\"http://sailsjs.org/documentation/anatomy/my-app/config/bootstrap-js\">SailsJS Bootstrap file</a></p>","frontmatter":{"title":"Copias de seguridad con SailsJS","tags":["Javascript"],"subtitle":"","featured_image":{"publicURL":"/static/man-with-tablet-2e4d849d17f364f50a1e5588d71f161f.jpg"}}}},"pageContext":{"pathSlug":"/copias-de-seguridad-con-sailsjs/"}}